<!DOCTYPE HTML>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Enhancing Undum Hypertext Fiction with Vorple</title>
	
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
	<script type="text/javascript">
	    if( typeof jQuery === 'undefined' ) {
	        document.write( unescape( "%3Cscript src='../../lib/jquery-1.6.4.min.js' type='text/javascript'%3E%3C/script%3E" ) );
	    }
	</script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
	<script type="text/javascript" src="media/js/jquery.toc.js"></script>
	<script type="text/javascript" src="media/js/highlighter/shCore.js"></script>
	<script type="text/javascript" src="media/js/highlighter/shBrushJScript.js"></script>
	<script type="text/javascript" src="media/js/highlighter/shBrushXml.js"></script>
	<script type="text/javascript" src="../../lib/vorple.min.js"></script>
	<script type="text/javascript" src="../../lib/jquery.qtip.min.js"></script>
	
	<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/smoothness/jquery-ui.css" type="text/css" media="screen, print" />
	<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Redressed" type="text/css" />
	<link rel="stylesheet" href="media/css/highlighter/shCore.css" />
	<link rel="stylesheet" href="media/css/highlighter/shThemeDefault.css" />
	<link rel="stylesheet" href="/css/common.css" />
	<link rel="stylesheet" href="media/css/manual.css" />
	<link rel="stylesheet" href="../../lib/qtip/jquery.qtip.min.css" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>

<body id="vorple">

<div id="remote-header"></div>

<script type="text/javascript">
$( function() {
    // Import the vorple-if.com header.
    // If viewed offline or on some other site this will fail gracefully.
    $.get(
        '/header.php?nohead=1',
        function( data ) {        
            $( '#remote-header' ).html( data );
        }
    );

    vorple.tooltip.enable( 
        '#headerCClogo',
        {
            position: { my: 'middle right', at: 'middle left' },
            content: { text: $( '#footer' ).html() }
        }
    );
    
    // Have the version numbers match the current one
    $( document ).bind( 'vorpleInit', function() {
        $( '.vorple-ver' ).html( vorple.core.version );
        $( '.vorple-rel' ).html( vorple.core.release );
    });

    // Start Vorple
    vorple.core.init(); 
});
</script>

<article id="content">

<div id="coverpage">

<h1>Enhancing Undum Hypertext Fiction with Vorple</h1>

<a href="#footer"><img alt="Creative Commons License" src="http://i.creativecommons.org/l/by/3.0/80x15.png" id="headerCClogo" /></a>

</div>

<div id="toc"></div>

<script type="text/javascript">
$( function() {
    $( '#toc' ).tableOfContents( null, {
        startLevel: 2,
        depth: 5
    }).before( '<h2>Table of Contents</h2>' );

    SyntaxHighlighter.all()
});
</script> 


<h2>About</h2>

<h3>Introduction to Vorple</h3>

<p>
<em>Vorple</em> is a user interface library for interactive literature. 
Its goal is to let online hypertext fiction and parser interactive fiction systems
break out of their sandboxes and let story authors use the full scale of the vast 
possibilities of technologies that are commonly used in the World Wide Web.
</p>

<p>
An author might use Vorple just to theme their story with one of the 
provided custom themes, or make a multimedia spectacle with pictures, video,
sound effects and interactive elements, or anything in between.
</p>

<p>
A web developer might ask if we really need Yet Another JavaScript Library.
There are many general-purpose libraries, like 
<a href="http://jquery.com">jQuery</a> which Vorple uses extensively,
but there are none made specifically for this purpose. 
Libraries for "normal" web sites work usually by modifying the page elements
directly, which is the best choice when you are building on top of an existing
structure, but interactive fiction is different  
</p>

<p>
The project's headquarters are at 
<a href="http://vorple-if.com">www.vorple-if.com</a> where you'll find all
the official material and downloads. JavaScript developers who want to dig
into the innards of the system can find the source code at
<a href="http://github.com/juhana/vorple">Github</a>.

</p>

<p>
The library and all official material are open source and free for anyone
to use for any purpose. (Mandatory footnote: Do still read all the licenses
if you want to use it commercially or as a part of a closed system. 
Some third party themes, for example, 
are subject to slightly more restrictive licenses.) 
</p>


<h3>Introduction to Undum</h3>

<p>
<strong>Undum</strong> is a JavaScript framework for creating works of hypertext 
and CYOA games. It is completely browser-based and provides beautiful visual 
design and smooth interaction out of the box. 
Undum is created and maintained by I D Millington.
</p>

<p>
Undum is programmed purely in JavaScript, the native language of all modern web 
browsers. The framework is very loose, providing only the basic functionality, 
which makes it easy to add more elements if so needed. 
</p>

<p>
Here are some examples of stories authored with Undum:
</p>

<ul>
<li> 
The official <a href="http://undum.com/games/tutorial.en.html">Undum tutorial</a> 
by I D Millington
</li>
<li> 
<a href="http://eblong.com/zarf/zweb/matter/">The Matter of the Monster</a> 
by Andrew Plotkin 
</li>
<li> 
<a href="http://diden.net/~maga/undum/idmillington-undum-2cd8eac/games/cavity.en.html">Cavity of Time</a> 
by "Ed Packer" (adult content)
</li>
<li> 
<a href="http://www.jeremiasbabini.com.ar/leaks/en/">Leaks</a>
by Jeremias Babini, Eva Bisceglia and Sebastian Garcia
</li>
<li>
<a href="http://www.deirdrakiai.com/theplay">The Play</a> by Deirdra Kiai
</li>
</ul>

<p>
As mentioned before, it's relatively easy to modify Undum's functionality and 
<em>The Matter of the Monster</em> and <em>Leaks</em> both use this possibility 
to add more features to the stories. The official Undum tutorial uses only the 
basic features, as do <em>Cavity of Time</em> and <em>The Play</em>.
</p>

<div class="resources">
Resources
</div>

<ul>
<li> <a href="http://undum.com">Undum home page</a></li>
<li> <a href="">Undum API</a></li>
</ul>


<h3>How to read this manual</h3>

<p>
This manual does <em>not</em> teach how to
write hypertext fiction with Undum. At the moment the tutorial game 
at <a href="http://undum.com">undum.com</a> is the best way to learn the
basics. From now on we'll assume that the reader knows at least how to create
situations and actions and the difference between <code>Situation</code>
and <code>SimpleSituation</code>.
</p>

<p>
Here's how the rest of this manual is structured:
</p>

<ul>
<li>
<a href="getting-started">Getting started</a> instructs on how to install
and set up the system.
</li>
<li>
<a href="#developing-with-vorple">Developing with Vorple</a> tells how
to actually use the system and warns of some caveats. 
</li>
<li>
<a href="#modules">Modules</a> is a reference for the included features.
</li>
<li>
<a href="#examples">Complete examples</a> introduces Vorple stories
that can be studied to see how different features are used in actual scenarios. 
</li>
</ul>

<p>
The manual does not try to be a comprehensive reference. 
When looking for information about a certain feature,
these are the primary learning resources:
</p>

<ul>
<li>
The <a href="#api">API</a> for syntax
</li>
<li>
This manual (under <a href="#modules">Modules</a>) for usage
</li>
<li>
The <a href="#examples">examples</a> for reference
</li>
</ul>


<h4 id="practices">Different coding practices</h4>

<p>
If you have followed the 
<a href="http://undum.com/games/tutorial.en.html">official Undum tutorial</a>
you'll notice that this manual uses slightly different conventions
to structure the code.
</p>

<p>
The official tutorial builds the situations in a single block:
</p>

<pre class="brush: js">
undum.game.situations = { 
    start: new SimpleSituation( "..." ), 
    foo: new SimpleSituation( "..." ),
    bar: new SimpleSituation( "..." )
};
</pre>

<p>
This manual, and the accompanying examples, 
create one situation at a time independent of each other.
</p>

<pre class="brush: js">
    undum.game.situations.start = new SimpleSituation( "..." );
    undum.game.situations.foo = new SimpleSituation( "..." );
    undum.game.situations.bar = new SimpleSituation( "..." );
</pre>

<p>
There's a small caveat associated with the latter method: 
Undum allows hyphens in situation names. 
If a situation's name contains a hyphen, 
it must be created using again a slightly different syntax:
</p>

<pre class="brush: js">
    undum.game.situations[ "end-scene" ] = new SimpleSituation( "..." );
</pre>

<p>
Both approaches are functionally equal. The reason why this manual takes 
a different approach is mainly because by creating the situations independently 
there's no need to include a complete story for each code snippet, 
and secondarily because it reduces the amount of required punctuation and 
therefore reduces the possibility of mistakes.
</p>

<p>
Another difference is that long lines of text are split to multiple lines
by concatenating smaller strings instead of using backslashes at the end of
lines. That is, the Undum tutorial does this:  
</p>

<pre class="brush: js;">
"&lt;p&gt;Now we're almost at the end of the road. But so\
far you have moved through this tutorial linearly - from one\
situation to the next, without any choice. Undum is designed to\
support narratives that branch and merge.&lt;/p&gt;"
</pre>

<p>
...but we do this instead:
</p>

<pre class="brush: js;">
"&lt;p&gt;Now we're almost at the end of the road. But so "
+ "far you have moved through this tutorial linearly - from one "
+ "situation to the next, without any choice. Undum is designed to "
+ "support narratives that branch and merge.&lt;/p&gt;"
</pre>

<p>
Again there's no practical difference, but since Vorple functions must
be concatenated with <code>+</code> characters it's simpler to use
the same method with normal text as well.
</p>


<h4 id="quickstart">Quick start for the impatient</h4>

<p>
People have different ways of learning new things.
For those who learn best by getting their hands dirty from the start 
and not by reading a book from cover to cover, 
here's how to pick the important parts:
</p>

<ul>
<li>
Get the system installed and running using instructions in either
<a href="#new-project">Starting a new project</a> or
<a href="#migrating">Migrating an existing project</a>, depending
on whether you're starting from a clean slate or from an existing Undum project.
</li>
<li>
Skim through the subchapters in
<a href="#developing-with-vorple">Developing with Vorple</a>.
You can probably grasp the syntax from looking at the examples later. 
If not, you can always come back and read the
<a href="#using-library">Using the library functions</a> chapter.
The <a href="#api">API</a> is at <a href="../API/">vorple.if/doc/API</a>, 
remember to keep it at hand. Pay closer attention to the
<a href="#functions-and-strings">Of functions and strings</a>
chapter so that you don't get bitten by unexpected behavior later. 
</li>
<li>
Look at the source codes of the example stories: 
<a href="#everything">One With Everything</a> and
<a href="#rabbithole">Down the Rabbit-Hole</a>. 
</li>
<li>
When you find some element that you want to use, look it up from this manual
(under the <a href="#modules">Modules</a> chapter) and from the API.
</li>
</ul>


<h2 id="getting-started">Getting started</h2>

<h3 id="new-project">Starting a new project</h3>

<p>
The <a href="http://vorple-if.com/download">download page at vorple-if.com</a>
has ready made packages for different themes. Choose a theme that pleases your
eye the most, download the package and unpack.
</p>

<p>
Each theme package has at least these files and directories:
</p>

<ul class="filestructure">
<li class="directory">css</li>
<li class="directory">lib</li>
<li class="directory">media
<ul class="filestructure">
<li class="directory">audio</li>
<li class="directory">image</li>
<li class="directory">music</li>
<li class="directory">video</li>
</ul>
</li>
<li class="code">vorple.game.en.js</li>
<li class="html">index.html</li>
</ul>

<p>
The media folder and its subfolders are meant for story-specific
multimedia files.
</p>

<p>
You can verify that everything works ok by opening
the <code>index.html</code> file with your browser.
You should see an extremely minimal but functioning Undum story.
</p>

<p>
Go through the <code>index.html</code> file and replace the placeholder
texts like story title and description. 
(You can also do this at any point later.)   
</p>

<p>
<code>vorple.game.en.js</code> is an empty story file.
If you want to call it something else, rename it
to whatever you wish and change the filename in <code>index.html</code>
so that it gets loaded properly. 
</p>

<p>
Finally, open <code>vorple.game.en.js</code> and go through 
it, there are more instructions there on how to complete the story's basic setup. 
</p>

<div class="note">
As with vanilla Undum, if you don't have a local webserver installed on
your computer it's best to use Firefox when developing the stories.
Other browsers might disable features as a security measure when local 
web pages contain JavaScript. 
</div>


<h3 id="migrating">Migrating an existing project</h3>

<p>
If you already have an existing Undum project
where you want to use Vorple, download any theme package from the
<a href="http://vorple-if.com/download">download page</a>.
You only need the library files so if you don't want to change your existing
theme it doesn't matter which package you download.
Unpack it and copy the library directory <code>lib/</code> to 
the same directory where the story's HTML file is.
</p>

<p>If you want to change the layout as well, skip the rest of this chapter
and read <a href="#new-theme">Migrating to a new theme</a> for further instructions.
</p>

<p>
Modify your existing main HTML file 
(usually <code><em>storyname</em>.en.html</code>) and add Vorple's libraries
and resources after the line that loads Undum. 
In the standard Undum template the line is almost at the end of the file.
</p>

<pre class="brush:html;">
&lt;!-- Find this line... --&gt;
&lt;script type="text/javascript" src="media/js/undum.js"&gt;&lt;/script&gt;

&lt;!-- ...and add these lines below it: --&gt;
&lt;script type="text/javascript" src="lib/jquery.qtip.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="lib/jquery.jplayer.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="lib/vorple.min.js"&gt;&lt;/script&gt;

&lt;!-- Make sure those lines come before the line that loads your story file,
        for example: --&gt;
&lt;script type="text/javascript"
        src="media/games/tutorial/tutorial.game.en.js"&gt;&lt;/script&gt;
</pre>

<p>
If you plan for the story to feature sounds or music, see chapter
<a href="#mute-controls">Mute controls</a> for instructions on how
to add the controls to the layout.  
</p>

<p>
Vorple is designed to be fully compatible with stories created for standard
Undum. If you have a story that works with vanilla Undum but not with Vorple,
please file a bug report.
</p>



<h4 id="new-theme">Migrating to a new theme</h4>

<p>
If you want to start using one of the Vorple-provided themes,
download the theme package, unpack it and copy your 
<code><em>storyname</em>.game.en.js</code> story file to its main directory.
The theme's <code>index.html</code> file becomes the new main HTML file.  
</p>

<p>
You'll need to manually edit <code>index.html</code> to match the contents of your
old HTML file (titles, descriptions, other custom content you've added). 
At the same time when you go through <code>index.html</code>, check
if the theme requires other attention as well. Special instructions will be
given as comments where necessary.
</p>

<p>
Before you can start using Vorple's features, you have to make the following
changes to the story file:
</p>

<ul>
<li>Add 
<a href="#initializing"><code>vorple.core.init();</code></a>
to the <code>undum.game.init()</code> function.</li>
<li>If you're using <code>undum.game.afterEnter()</code> or
<code>undum.game.afterAction()</code> global event hooks, you have to make
sure that they run 
<code>vorple.undum.afterEnterTrigger( character, system, from, to );</code>
and 
<code>vorple.undum.afterActionTrigger( character, system, situation, action );</code>
respectively by adding them to the beginning of the event hooks.
</li>
</ul>

<p>
Without these additions some of Vorple's features might not work 
correctly or at all. Refer to the <code>vorple.game.en.js</code> 
file for an example.
</p>


<h2 id="developing-with-vorple">Developing with Vorple</h2>

<h3 id="initializing">Initializing the library</h3>

<div class="note floatbox">
Always remember to initialize Vorple. Some features won't work or 
work incorrectly if the library isn't initialized.
</div>

<p>
Some of Vorple's features are initialized by calling 
<code>vorple.core.init()</code><a href="../API/symbols/vorple.core.html#.init" class="api">API</a>.
<code>undum.game.init()</code> is a good place to do so.
</p>

<pre class="brush: js;">
undum.game.init = function( character, system ) {
    // other Undum initialization
    // ...
    
    vorple.core.init();
};
</pre>


<h3 id="using-library">Using the library functions</h3>

<p>
Vorple adds enhancements to Undum's basic functionality 
(with the <a href="#core">core module</a>) and extends its
capabilities (with the <a href="#undum">Undum module</a>).
The setup and usage of these features are covered in the 
respective module chapters.
</p>

<p>
To help write the HTML contents of an Undum story, the 
<a href="#html">HTML module</a> has helper functions
that create HTML tags. For example, here's the
(abbreviated) starting situation from the
<a href="http://undum.com/games/tutorial.en.html">Undum tutorial game</a>:
</p>

<pre class="brush: js;">
start: new undum.SimpleSituation(
    "&lt;h1&gt;Starting Out with Undum&lt;/h1&gt;\
    &lt;img src='media/games/tutorial/woodcut1.png' class='float_right'&gt;\
    &lt;p&gt;Welcome to the Undum tutorial. Undum is a tool for writing\
    hypertext interactive fiction. It has some unique features\
    and a visual design that encourages narrative games.&lt;/p&gt;\
    \
    &lt;p class='transient'&gt;For now, lets move on with the tutorial.\
    &lt;a href='rooms'&gt;Click this link&lt;/a&gt; to move on.&lt;/p&gt;"
)
</pre>

<p>
Using Vorple's HTML helpers it would be written like this:
</p>

<pre class="brush: js;">
undum.situations.start = new undum.SimpleSituation(
    vorple.html.tag( "h1", "Starting Out with Undum" )
    + vorple.media.image( 'woodcut1.png', { classes: 'float_right' } )
    + vorple.html.p(
        "Welcome to the Undum tutorial. Undum is a tool for writing "
        + "hypertext interactive fiction. It has some unique features "
        + "and a visual design that encourages narrative games."
       ) + vorple.html.p(
        "For now, lets move on with the tutorial. "
        + vorple.html.link( "rooms", "Click this link" )
        + " to move on.", { classes: 'transient' } 
       )
)
</pre>

<div class="note floatbox">
See the <a href="#practices">Different coding practices</a> chapter
for an explanation why the long lines are split differently in the
above examples.
</div>

<p>
Using the helpers reduces the chance of typos and missing end tags
and they make the code more structured and readable 
(although your mileage may vary).
</p>

<p>
Other functions that don't create story text but do something else like
play sounds or create tooltips are 
<a href="#functions">called inside functions</a>.
</p>

<pre class="brush: js;">
undum.situations.maze = new undum.SimpleSituation( function() {
    vorple.media.playMusic({ mp3: "background.mp3", oga: "background.ogg" });
    return vorple.html.p( "You are in a maze of twisty passages, all alike." );
});
</pre>

<p>
The exact syntax is described in each feature's documentation in this manual
and in the API.
</p>


<h3 id="api">Reading the API</h3>

<p>
Vorple's modules and functions are documented in detail in the API.
The API is included in the zip package and a link to the 
<a href="http://vorple-if.com/doc/API/">online version</a>
is in the main menu of the 
<a href="http://vorple-if.com">Vorple project website</a>.   
</p>

<p>
Functions mentioned in this manual have a link appended to them that
takes you to the corresponding place in the API:
<code>vorple.core.init()</code><a href="../API/symbols/vorple.core.html#.init" class="api">API</a>
</p>

<p>
In the API you'll find a list of modules in the left hand side of the page.
Clicking on a module's name opens a page that details the fields (variables)
and methods (functions) included in the module.
</p>

<p>
Here's an example documentation of 
<code>vorple.core.requireRelease()</code><a href="../API/symbols/vorple.core.html#.requireRelease" class="api">API</a>:
</p>

<div class="illustration">
<img src="media/image/vorple/APIexample.png" alt="An example from the API" />
</div>

<p>
The first line tells that this method:
</p>
<ul>
<li>is a static method (all Vorple's public methods are static, 
so this is not meaningful information)</li>
<li>returns a boolean datatype (<code>true</code> or <code>false</code>)</li>
<li>is called <code>vorple.core.requireRelease</code></li>
<li>accepts two parameters</li>
</ul> 

<p>
The following paragraph describes the use and behavior of the method.
</p>

<p>
Next there's a description of accepted parameters. The accepted type or types
are inside the square brackets. The parameter's name corresponds to the 
name shown in the first line and the text "optional" means that this parameter
can be left out. If the parameter defaults to some value if it's left out,
it's also shown here. 
</p>

<div class="illustration">
<img src="media/image/vorple/APIdefault.png" alt="A screenshot from the API of a parameter with a default value" />
</div>

<p>
Finally there's the description of the return value (if any). 
There might also be links to other parts of the API or to external resources. 
</p>

<p>
At the top of the page there's a link to the source code of the module.
If reading the manual and the API still leaves you wondering what a
function does or how it's used, you can always look at its source code
and try to figure it out from there.  
</p>

<p>
Remember that Vorple uses the <a href="http://www.jquery.com">jQuery library</a>
that has its <a href="http://api.jquery.com/">own api</a>.
Other included libraries have their own documentation, 
but the API has links to them when necessary. 
</p>


<h3 id="functions-and-strings">Of functions and strings</h3>

<p>
We need to go through some JavaScript theory for this one. 
Let's say we want to make a situation where we show "Hello world!" to the reader.
There are three ways to do it:
</p>

<pre class="brush: js;">
// SimpleSituation with a string argument
new undum.SimpleSituation( "&lt;p&gt;Hello world!&lt;/p&gt;" );

// SimpleSituation with a function argument
new undum.SimpleSituation( function() {
    return "&lt;p&gt;Hello world!&lt;/p&gt;"; 
});

// Situation
new undum.Situation({
    enter: function( character, system, from ) {
        system.write( "&lt;p&gt;Hello world!&lt;/p&gt;" );
    }    
});
</pre>

<p>
The end result is always the same, words "Hello world!" displayed on the screen.
The difference is that the first method uses a string argument which is
evaluated on initialization and the two others use functions whose contents
are evaluated when they are called. 
</p>

<p>
What does this fancy tech jargon mean and why is it important?
Let's look at a practical example where we want to play a sound effect
when the reader enters a situation:
</p>

<pre class="brush: js; highlight: [1,2,3,4,5]">
// This won't work:
new undum.SimpleSituation( 
    "&lt;p&gt;You hear a loud bang.&lt;/p&gt;"
    + vorple.media.playSound({ mp3: "gunshot.mp3" })
);

// Do this instead:
new undum.SimpleSituation( function() {
    vorple.media.playSound({ mp3: "gunshot.mp3" });
    return "&lt;p&gt;You hear a loud bang.&lt;/p&gt;";
});
</pre>

<p>
What happens with the first (incorrect) method is that the string contents
are evaluated when the story loads and therefore you hear the sound effect
right away, not when the reader enters the situation. In the latter version
the sound playing function call is inside a function that's called only
when the situation is entered so the sound plays at the correct time. 
</p>

<p>
Vorple's functions can be divided into two categories: <em>active</em>
functions that do something the moment they're called, and 
<em>passive</em> functions that return a string of HTML code. 
</p>

<p>
The following modules or functions are always passive and therefore safe
to use in <code>undum.SimpleSituation</code> as a string argument:
</p>

<ul>
<li>everything in the <code>html</code> module</li>
<li><code>vorple.media.image()</code></li>
<li><code>vorple.media.youtube()</code></li>
</ul>

<p>
For everything else it's safer to use them in functions only.
</p>



<h2 id="modules">Modules</h2>

<h3 id="module-button">Button</h3>
<p>TBA</p>

<h3 id="module-cookie">Cookie</h3>

<p>
Cookies are small snippets of text web pages can save to the user's computer.
Cookies can be used to identify a returning user or save data across sessions.
</p>

<p>
Cookies can be set using the
<code>vorple.cookie.write()</code><a href="../API/symbols/vorple.cookie.html#.write" class="api">API</a>
method and read with
<code>vorple.cookie.read()</code><a href="../API/symbols/vorple.cookie.html#.read" class="api">API</a>.
Cookies can be deleted using 
<code>vorple.cookie.remove()</code><a href="../API/symbols/vorple.cookie.html#.remove" class="api">API</a>.
A cookie has text content and a name that's used to identify the cookie.
</p>

<pre class="brush: js;">
vorple.cookie.write( 'greeting', 'Hello!' );  // sets a cookie called "greeting"
vorple.cookie.read( 'greeting' );             // returns "Hello!"
vorple.cookie.remove( 'greeting' );           // removes the cookie
</pre>

<p>
The cookie's contents can be updated by overwriting it with
<code>vorple.cookie.write()</code>.
</p>

<p>
By default cookies are set to expire in one year. The expiration period
can be set using an <code>expires</code> option while writing the cookie,
as a number of days the cookie is valid or as a JavaScript <code>Date</code>
object:
</p>

<pre class="brush: js;">
vorple.cookie.write( 'greeting', 'Hello!', { expires: 7 } );
</pre>

<div class="note floatbox">
There's no guarantee that the user's browser keeps the cookies for the
full duration of the expiration period, or that the browser accepts them at all.
You shouldn't rely on cookies alone for important features.
</div>

<p>The <a href="http://www.ietf.org/rfc/rfc2109.txt">specification</a> 
says that a browser should accept at least 20 cookies per web site, each 
with maximum content length of 4096 bytes (characters). 
Most browsers allow much more than this, but it's safest to stay within
these boundaries. Some browsers also limit the <em>total</em>
length of all cookies per web site to 4096 bytes or some other value. 
</p>

<div class="resources">Resources</div>
<ul>
<li>Wikipedia: <a href="http://en.wikipedia.org/wiki/HTTP_cookie">HTTP cookie</a></li>
</ul>



<h3 id="core">Core</h3>
<p>
The core module has mainly helper functions for other modules and
general settings and features.
</p>

<h4 id="settings">Settings</h4>

<p>
<code>vorple.core.settings</code> contains two variables:
<code>vorple.core.settings.confirmWindowClose</code> (default <code>false</code>) 
and <code>vorple.core.settings.debug</code> (default <code>false</code>). 
</p>

<p>
<code>vorple.core.settings.confirmWindowClose</code> defines whether or not
the browser should alert the reader that they're leaving the page when they
close the browser window or try to navigate to another page. 
The purpose is to prevent the reader from accidentally leaving the page and
inadvertently erasing their progress at the same time.
</p>

<div class="note floatbox">
Firefox versions 4 and up disregard the custom message and always show the 
browser's default message in the confirmation dialog.
</div>

<p>
If the variable is set to <code>true</code> a default message will be used:
<em>"You are about to leave the story. Any unsaved progress will be lost.
Are you sure you want to continue?"</em>
If the variable is a string, it will be used as the message: 
<code>vorple.core.settings.confirmWindowClose = "Are you sure you want to
leave the game?"</code>
</p>

<p>
The variable <code>vorple.core.settings.debug</code> can be set to <code>true</code>
while developing the story. The flag can be used to add code used for debugging
so that they don't accidentally appear in the released version of the story:
<code>if( vorple.core.settings.debug ) { ... }</code> 
</p>

<p>Setting the debug flag disables 
<code>confirmWindowClose</code> so that you don't have to dismiss the confirmation
dialog every time you reload the page.  
</p>

<p>
The setting variables can be set at the beginning of the story file
so that they're immediately active. 
</p>


<h4 id="version-numbers">Version numbers</h4>

<p>
<code>vorple.core.version</code> and <code>vorple.core.release</code> contain the Vorple library's version numbers.
<strong>Release</strong> is incremented every time a new release is made, and <strong>version</strong> increments when the new release
includes a major feature or a significant rewrite of existing features. The full version number is displayed as <em>version.release</em>, 
for example version <span class="vorple-ver">2</span> release <span class="vorple-rel">15</span> 
is denoted as <span class="vorple-version">2.15</span>.  
</p>

<p>
A plugin or another library can require a certain release of the Vorple library
by calling <code>vorple.core.requireRelease()</code><a href="../API/symbols/vorple.core.html#.requireRelease" class="api">API</a>. 
An error is thrown if the library is not recent enough. The release number will always increment between releases,
even when the version number increments, so it's safe to check only the release number.
</p>

<p>
If the page layout contains an element with class <code>vorple-version</code>, the contents of the element are replaced
by the Vorple's version number in the <em>version.release</em> format. The default Vorple themes have this
in the page footer:
</p>

<pre class="brush: html;">
Powered by &lt;a href="http://undum.com"&gt;Undum&lt;/a&gt;
and    &lt;a href="http://vorple-if.com"&gt;Vorple 
&lt;span class="vorple-version"&gt;&lt;/span&gt;&lt;/a&gt;.
</pre>

<p>
In the page itself it will look like this:
</p>

<div class="htmlExample">
Powered by <a href="http://undum.com">Undum</a> 
and <a href="http://vorple-if.com">Vorple <span class="vorple-version">2.15</span></a>.
</div>


<h4>Initialization event</h4>

<p>
<code>vorple.core.init()</code><a href="../API/symbols/vorple.core.html#.init" class="api">API</a>
triggers a <code>vorpleInit</code> event that 
can be used to add custom initialization methods:
</p>

<pre class="brush: js;">
$( document ).bind( 'vorpleInit', function() {
    // custom initialization here
});
</pre>

<p>
This is mostly useful for plugins. Individual stories can just add any
initialization they need to <code>undum.game.init()</code>.
</p>


<h3 id="html">HTML</h3>

<p>
In all HTML module functions that create HTML tags you can add tag
attributes as the last parameter. The attributes are given as an object
that has the attributes' names as keys and contents as values: 
</p>

<pre class="brush: js;">
vorple.html.p( 
    "Test",
    {
        id: "foo",
        classes: "bar",
        title: "baz"
    }
);
// &rarr; &lt;p id="foo" class="bar" title="baz"&gt;Test&lt;/p&gt; 
</pre>

<p>
Note how the <code>class</code> attribute must be named <code>classes</code>
because "class" is a reserved word in JavaScript.
</p>


<h4 id="html-p">Paragraphs</h4>

<p>
<code>vorple.html.p()</code><a href="../API/symbols/vorple.html.html#.p" class="api">API</a>
wraps given contents inside <code>&lt;p&gt;</code> tags. 
The following are equal:
</p>

<pre class="brush: js;">
// the "pure" Undum method
new undum.SimpleSituation( "&lt;p&gt;Hello World!&lt;/p&gt;" );

// with the HTML helper
new undum.SimpleSituation( vorple.html.p( "Hello World!" ) );

// with a custom class
vorple.html.p( "Hello World!", { classes: "transient" } );
// &rarr; &lt;p class="transient"&gt;Hello World!&lt;/p&gt;
);
</pre>


<h4 id="html-link">Links</h4>

<p>
Links can be added with 
<code>vorple.html.link()</code><a href="../API/symbols/vorple.html.html#.link" class="api">API</a>.
The first parameter is the link target, the second parameter the contents,
and the third the <code>&lt;a&gt;</code> tag options.

</p>

<pre class="brush: js;">
vorple.html.link( "./book", "Open the book", { classes: 'unique' } );
// &rarr; &lt;a href="./book" class="unique"&gt;Open the book&lt;/a&gt;
</pre>

<p>
The parameters can be given as a single object that has keys for at least 
the url and the contents:
</p>

<pre class="brush: js;">
vorple.html.link({ 
    url: "./book", 
    content: "Open the book", 
    options: { classes: 'unique' } 
});
</pre>


<h4 id="html-quotes">Quotes</h4>
<p>
<code>vorple.html.quote()</code><a href="../API/symbols/vorple.html.html#.quote" class="api">API</a>
can be used to wrap contents inside quotes.
The reason you might want to use this helper instead of just writing the
quotes is that this way you can't forget to add the closing quote and
you don't have to escape the quotes as in the example below. 
</p>

<pre class="brush: js;">
// vanilla Undum
new undum.SimpleSituation( "&lt;p&gt;\"Hello,\" she said.&lt;/p&gt;" );

// HTML helper
new undum.SimpleSituation(
    vorple.html.p( vorple.html.quote( "Hello," ) + " she said." )
);
</pre>

<p>
Double quotes (<code>"</code>) are used by default but another character or
characters can be given as the second parameter, or an array with two members
where the first member is the opening quote and the second character 
the closing quote.
If you assign a character to the <code>vorple.html.defaults.quotemarks</code>
variable, it's used as a default from there on. 
</p>

<pre class="brush: js;">
vorple.html.quote( "Hello", "'" );                         // &rarr; 'Hello'
vorple.html.quote( "Hello", [ "&amp;laquo;", "&amp;raquo;" ] );  // &rarr; &laquo;Hello&raquo;
</pre>

<p>
(<a href="http://en.wikipedia.org/wiki/Character_entity_reference">Character
entity references</a> were used to create the arrow quotes.) 
</p>


<h4 id="html-tag">Other tags</h4>

<p>
You can add any HTML tags using 
<code>vorple.html.tag()</code><a href="../API/symbols/vorple.html.html#.tag" class="api">API</a>.
The first parameter is the tag's name, the second is the contents inside the tag
and the third parameter the options and attributes.
</p>

<pre class="brush: js;">
vorple.html.tag( 
    "div", 
    "Hello World!",
    {
        classes: "transient",
        title: "Greeting"
    }
);
// &rarr; &lt;div class="transient" title="greeting"&gt;Hello World!&lt;/div&gt;  
</pre>

<p>
The end tag is added automatically if text content is given, and
the tag is self-closed if the content is not a string. 
</p>

<pre class="brush: js;">
vorple.html.tag( "br" );       // &rarr; &lt;br /&gt;
vorple.html.tag( "div", "" );  // &rarr; &lt;div&gt;&lt;/div&gt;
vorple.html.tag(               // &rarr; &lt;hr class="wide" /&gt;
    "hr", 
    null, 
    { classes: "wide" }
);
</pre>

<p>
If you want to make sure the end tag is always added,
use <code>endTag: "always"</code> option:
</p>

<pre class="brush: js;">
vorple.html.tag(
    "div",
    contents,
    { endTag: "always" }
);
</pre>


<div class="note">
Instead of the generic <code>vorple.html.tag()</code> use 
<ul>
<li>
<a href="#html-p"><code>vorple.html.p()</code></a> for <code>&lt;p&gt;</code> tags
</li>
<li>
<a href="#html-link"><code>vorple.html.link()</code></a> for 
<code>&lt;a&gt;</code> tags and  
</li>
<li>
<a href="#media-images"><code>vorple.media.image()</code></a> for 
<code>&lt;img&gt;</code> tags.
</li>
</ul>
</div>


<h3 id="media">Media</h3>

<h4 id="media-images">Images</h4>

<p>
<code>vorple.media.image()</code><a href="../API/symbols/vorple.media.html#.image" class="api">API</a>
creates an <code>&lt;img&gt;</code> tag. The first parameter is the
picture's file name and the second optional parameter an object with tag attribute options.
</p>

<pre class="brush: js;">
vorple.media.image( 'pic.png', { classes: 'once', title: 'A nice picture' } );
// result: &lt;img src="media/image/pic.png" class="once" title="A nice picture" /&gt;
</pre>

<p>
Unless an absolute path to the file is given 
(<code>/other/folder/pic.png</code> or <code>http://example.com/pic.png</code>),
a path specified by <code>vorple.media.defaults.imagePath</code> is used.
The default is the <code>media/image/</code> directory that comes pre-made in
all theme packages. It can be changed by assigning a new path to the variable.  

</p>

<pre class="brush: js;">
vorple.media.image( 'pic.png' );    // &rarr; media/image/pic.png

vorple.media.defaults.imagePath = '/resources/pics/';
vorple.media.image( 'pic.png' );    // &rarr; /resources/pics/pic.png
</pre>


<h4>Preloading images</h4>

<p>
By default the web browser loads images included in the story only when
they are first encountered. The reader might see the image appear on the page
slightly after the text, or they might see the image slowly loading, depending
on their Internet connection and the size of the image.
</p>

<p>
This can be countered by preloading the image files. 
<code>vorple.media.preloadImage()</code><a href="../API/symbols/vorple.media.html#.preloadImage" class="api">API</a>
makes the browser load the images beforehand so that they can be displayed 
immediately when the story actually needs them. Multiple images can be given
to the function as an array at the same time.
</p>

<pre class="brush: js;">
vorple.media.preloadImage([ 'image1.png', 'image2.jpg' ]);
</pre>

<p>
<code>undum.game.init()</code> is a good place to preload the images.
The default image path is assumed, just like with 
<code>vorple.media.image()</code>.
</p>

<p>
The downside is that preloading consumes bandwith unnecessarily if the reader
doesn't actually come to the point in the story where the image is needed.
You might consider preloading images only at some point during the story,
for example one situation before the one that shows the image or at the point
when the reader enters a branch in the story that leads to the situation that
has the image.
</p>


<h4 id="media-sounds">Sound effects</h4>

<div class="note floatbox">
The sounds are played automatically with sound down if the reader has
<a href="#mute-controls">muted sounds</a>. The same applies to music. 
</div>

<p>
Audio and local video files are played using the
<a href="http://jplayer.org/">jPlayer</a> library.
</p>

<p>
Sound effects can be played by using 
<code>vorple.media.playSound()</code><a href="../API/symbols/vorple.media.html#.playSound" class="api">API</a>.
</p>

<p>
Since the support for audio files in browsers varies quite a bit, 
for best compatibility you can supply the same sound file in
several different formats.
</p>

<pre class="brush: js;">
vorple.media.playSound({
    mp3: "sound.mp3",
    oga: "sound.ogg"
});
</pre>

<p>
Audio files are loaded from the project's <code>media/audio</code> directory
unless other path is given, just like with <a href="#media-images">images</a>.
The default path is stored in <code>vorple.media.defaults.audioPath</code>.
</p>

<p>
<code>vorple.media.stopSounds()</code><a href="../API/symbols/vorple.media.html#.stopSounds" class="api">API</a>
stops all currently playing sounds. If you need to stop or pause
a single sound, you have to manipulate the player object directly.
<code>vorple.media.playSound()</code> returns a jPlayer object.
If you assign the return value to a variable, you can use any
<a href="http://jplayer.org/">jPlayer methods</a> to manipulate the player.
</p>

<div class="note">
iOS devices (iPhone, iPad, iPod) support only <em>one</em> sound playing
simultaneously.
If you specifically target these devices, it's best to use either background
music or sound effects, but not both. Otherwise any sound effect will stop
the background music. 
</div>



<h4>Music</h4>

<p>
For music these functions can be used: 
</p>

<ul>
<li>
<code>vorple.media.playMusic()</code><a href="../API/symbols/vorple.media.html#.playMusic" class="api">API</a>
to start a music track
</li>
<li>
<code>vorple.media.stopMusic()</code><a href="../API/symbols/vorple.media.html#.stopMusic" class="api">API</a>
to stop playing music
</li>
</ul>

<p>
They work identically to <code>vorple.media.playSound()</code> and
<code>vorple.media.stopSounds()</code>. There's also 
<code>vorple.media.stopAll()</code><a href="../API/symbols/vorple.media.html#.stopAll" class="api">API</a>
that will stop both sound effects and music.
</p>

<p>
The default directory for music files is <code>media/music</code>.
It can be changed by assigning the new directory to
<code>vorple.media.defaults.audioPath</code>.
</p>

<p>
Why not just play background music the same way you'd play sound effects? 
There are a couple of key differences:
</p>
<ul>
<li>
    You can play only one music track at the same time. 
    When you start playing a new music track,
    you don't have to stop the existing track. 
    Starting a music track will automatically stop the previous
    track from playing. 
</li>
<li>
    You can easily stop or mute only music or only sound effects.  
</li>
<li>
    When loading a saved story, sound effects will not be played again
    (remember that Undum replays the whole story from the start when it's
    loading from a save). The last played music track will start playing when 
    the story is loaded unless it was manually stopped. 
</li>
</ul>


<h4>YouTube videos</h4>

<p>
YouTube videos can be embedded with 
<code>vorple.embed.youtube()</code><a href="../API/symbols/vorple.media.html#.youtube" class="api">API</a>.
The function takes as the first parameter the id of the video to embed
and as the second parameter the options. 
</p>

<table class="definitions">
<tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th></tr>
<tr>
<td>height</td><td>integer</td><td>390</td><td>Height of the video player</td>
</tr><tr>
<td>width</td><td>integer</td><td>640</td><td>Width of the video player</td>
</tr><tr>
<td>parameters</td><td>object</td><td>see below</td><td>YouTube embedding parameters</td>
</tr>
</table>

<p>
All available embedding parameters are listed in the 
<a href="http://code.google.com/apis/youtube/player_parameters.html">YouTube API documentation</a>.
Default parameters are:
</p>

<pre class="brush: js;">
autoplay: '1',
controls: '0',
disablekb: '1', 
modestbranding: '1',
rel: '0' 
</pre>

<p>
That is, start playing the video immediately, hide controls, disable
keyboard controls, hide YouTube logos and don't show related videos at the end.
</p>

<p>
When the story is being reloaded from a save position, the video player is 
embedded but <code>parameters.autoplay</code> is set to 0 so that it won't start
playing automatically.  
</p>

<p>
An example of usage where we show a video in an Undum situation:
</p>

<pre class="brush: js;">
undum.game.situations.livingroom = new undum.SimpleSituation(
    vorple.html.p( 
        "You find yourself in a living room where a film has just "
        + "started playing on the DVD player." 
    ) + vorple.html.p(
        vorple.embed.youtube( 
            'bsGEWHNJ3s8',
            {
                width: '500',
                height: '280',
                parameters: {
                    controls: '1',     // allow the user to control the video 
                    loop: '1'        // start again from the beginning when playback ends
                }
            }
        ) 
    )
);
</pre>


<h4 id="mute-controls">Mute controls</h4>

<div class="note floatbox">
Themes included with Vorple already have the mute checkboxes in the HTML
files, but by default they are not displayed. Remove the 
<code>&lt;!--  --&gt;</code> tags around the checkboxes to enable them.
</div>

<p>
If the story uses audio, it's polite to offer the reader a possibility to
mute sounds. If you put the following piece of code into the story's
HTML file, that is, checkboxes with class <code>mute</code> and 
value <code>sound</code>, <code>music</code> or <code>all</code>, 
Vorple will automatically make them function as you'd expect. 
</p>

<pre class="brush: html;">
&lt;div&gt;
    &lt;input type="checkbox" id="muteMusic" class="mute" value="music" /&gt; 
    &lt;label for="muteMusic"&gt;Mute music&lt;/label&gt;
&lt;/div&gt;
&lt;div&gt;
    &lt;input type="checkbox" id="muteSound" class="mute" value="sound" /&gt; 
    &lt;label for="muteSound"&gt;Mute sound effects&lt;/label&gt;
&lt;/div&gt;
&lt;div&gt;
    &lt;input type="checkbox" id="muteAll" class="mute" value="all" /&gt; 
    &lt;label for="muteAll"&gt;Mute all&lt;/label&gt;
&lt;/div&gt;
</pre>

<p>
If you want to use the opposite scheme where a checked box means that
sounds are <em>enabled</em>, you can use the "unmute" class instead.
The functionality is identical but reversed.
</p>

<pre class="brush: html;">
&lt;div&gt;
    &lt;input type="checkbox" id="unmuteMusic" class="unmute" value="music" /&gt; 
    &lt;label for="unmuteMusic"&gt;Music&lt;/label&gt;
&lt;/div&gt;
&lt;div&gt;
    &lt;input type="checkbox" id="unmuteSound" class="unmute" value="sound" /&gt; 
    &lt;label for="unmuteSound"&gt;Sound effects&lt;/label&gt;
&lt;/div&gt;
&lt;div&gt;
    &lt;input type="checkbox" id="unmuteAll" class="unmute" value="all" /&gt; 
    &lt;label for="unmuteAll"&gt;All sounds&lt;/label&gt;
&lt;/div&gt;
</pre>

<p>
The mute status is written to a browser cookie every time it changes.
In other words if the reader mutes audio, the preference is automatically
remembered the next time they load the story.
</p>

<p>
To toggle the mute state manually you can use 
<code>vorple.media.mute()</code><a href="../API/symbols/vorple.media.html#.mute" class="api">API</a>
to mute or unmute sounds, music or videos, or 
<code>vorple.media.muteAll()</code><a href="../API/symbols/vorple.media.html#.muteAll" class="api">API</a>
to mute or unmute all sounds. <code>vorple.media.muteAll()</code> is a shortcut for 
<code>vorple.media.mute({ sound: true, music: true })</code>.
</p>

<p>
<code>vorple.media.mute()</code> uses an object that describes what elements
to mute or unmute:
</p>

<pre class="brush: js;">
vorple.media.mute( { music: true } );                // mute music
vorple.media.mute( { music: true, sound: false } );    // mute music and unmute sound
</pre>

<p>
<code>vorple.media.muteAll()</code> is used by giving the mute status as a parameter:
</p>

<pre class="brush: js;">
vorple.media.muteAll( true );    // mute everything
vorple.media.muteAll( false );    // unmute everything
</pre>

<div class="note floatbox">
Local videos respect the mute sound option. 
Embedded YouTube videos are always played with the sound on.
</div>

<p>
The mute checkboxes are automatically toggled to reflect the current mute
status even when the muting is done manually. 
</p>

<p>
Mute status can be toggled with 
<code>vorple.media.toggleMute()</code><a href="../API/symbols/vorple.media.html#.mute" class="api">API</a>.
It will unmute muted media and vice versa. The return value is true if the 
new status of the media is muted and false if it's now unmuted.
</p>

<p>
Here's an example of a button that toggles sounds on and off and changes
its own text to reflect the current status from "Sounds on" to "Sounds off".
</p>

<pre class="brush: js;">
&lt;button onclick="$( this ).html( vorple.media.toggleMute( 'sound' ) ? 'Sounds off' : 'Sounds on' );"&gt;
    Sounds on
&lt;/button&gt;
</pre>



<h4>Limitations</h4>

<p>
Native audio and video support in web browsers is still far from standard.
Some browsers can play only MP3 files, some only OGG files, some both, some
neither. (The current situation is covered in the 
<a href="http://jplayer.org/latest/developer-guide/#reference-html5-media">jPlayer
documentation</a>.) 
jPlayer tries to use the browser's native playback capabilities
and falls back to a Flash solution if it doesn't work. 
</p>

<p>
For this reason, to make sure the reader gets to see the videos and hear
the sounds you should provide two versions of all files: an MP3 and an OGG
file for sounds, and an M4V and an OGG file for videos. 
This will cover practically all modern desktop browsers and many of the mobile
browsers.
</p>

<p>
If you don't want to make two or more versions of each media file,
the safest alternative is to use only MP3 and M4V files. 
Some readers will then not be able to see or hear
the media, but the percentage is probably very low 
(Firefox or Opera users who don't have Flash installed).   
</p>

<p>
YouTube videos always require Flash (with some exceptions;
iOS browsers (iPhone, iPod, iPad) can launch YouTube videos in a separate
player).
</p>


<h3>Tooltip</h3>

<h4>Creating tooltips</h4>

<p>
Vorple comes bundled with the
<a href="http://craigsworks.com/projects/qtip2/">qTip<sup>2</sup></a>
tooltip library.
</p>

<p>
To add a tooltip to every link in the game, we'll add the 
<code>vorple.tooltip.enable( 'a' )</code><a href="../API/symbols/vorple.tooltip.html#.enable" class="api">API</a>
to <code>undum.game.init()</code>:
</p>

<pre class="brush: js;">
vorple.tooltip.enable( 'a' );
</pre>

<p>
As simple as that! Now every link that has the <code>title</code> attribute
will show the contents of the title as a tooltip when the mouse is put over them.
</p>

<pre class="brush: html;">
&lt;a href="foo" title="This is the tooltip's text!"&gt;Link&lt;/a&gt;
</pre>

<p>
Or using the HTML module:
</p>
 
<pre class="brush: js;">
vorple.html.link( 'foo', 'Link', { title: "This is the tooltip's content!" } );
</pre>

<p>
The parameter is a jQuery selector. If you need to add tooltips more accurately
or to other elements, refer to the 
<a href="http://api.jquery.com/category/selectors/">jQuery documentation</a>.
</p>

<p>
All qTip<sup>2</sup> options are supported. The documentation is at
<a href="http://craigsworks.com/projects/qtip2/docs/">http://craigsworks.com/projects/qtip2/docs/</a>
(look under "Options").
</p>


<h4>Manually triggered tooltips</h4>

<p>
Sometimes we might want to display a tooltip in response to an unrelated event
or as part of the story's plot. 
<code>vorple.tooltip.show()</code><a href="../API/symbols/vorple.tooltip.html#.show" class="api">API</a>
creates a tooltip and shows it after a delay, then hides it again
after another delay.
</p>

<pre class="brush: js;">
vorple.tooltip.show( 
    '.targetClass', 
    'Tooltip content', 
    {
        delay: 1000,    // 1 second
        duration: 5000    // 5 seconds
    } 
);
</pre>

<p>
The first parameter is the element's jQuery selector, 
the second the text to be displayed in the tooltip,
and the third is the options, including the 
delay before showing the tooltip
and the duration how long the tooltip is displayed in milliseconds.
The defaults for the delay and duration are
3000 milliseconds and 10000 milliseconds respectively.
</p>


<h3>Undum</h3>

<h4>Disposable links</h4>

<p>
Undum's
<a href="http://undum.com/API.html#h_8">once</a>-links disable themselves
after they've been clicked, but the effect is temporary. If the reader
encounters the same link later, it's active again.
</p>

<p>
Disposable links are similar to once-links, but the effect is permanent: 
after the reader has clicked on a disposable link,
it will never be shown during the same story again. (Links with the same target
(<code>href</code>-attribute) are considered being the same link.)  
</p>

<p>
There are two ways to define disposable links: either give them as a list,
or specify that <em>all</em> links should be disposable and list only
the exceptions.
</p>

<p>
The disposable link list should be assigned as an array to 
<code>vorple.undum.settings.disposableLinks</code>:
</p>

<pre class="brush: js;">
vorple.undum.settings.disposableLinks = [ 'discard', 'these', 'links' ];
</pre>

<p>
To use the latter method and specify that all links should be disposable,
set <code>vorple.undum.settings.allDisposable</code> to <code>true</code>
and, if necessary, list the exceptions as an array in 
<code>vorple.undum.settings.disposableExceptions</code>.  
</p>

<pre class="brush: js;">
vorple.undum.settings.allDisposable = true;
vorple.undum.settings.disposableExceptions = [ 'non-disposable', 'links' ];
</pre>

<p>
If <code>vorple.undum.settings.allDisposable</code> is <code>true</code>,
<code>vorple.undum.settings.disposableLinks</code> will be ignored.
</p>

<div class="note floatbox">
Disposing a link will dispose of both actions and situations with the same name, 
so it's generally best to always use unique action and situation names.
</div>

<p>
Disposable links don't make a difference between situations and actions.
Links to actions should be listed without the <code>./</code> prefix.
</p>

<p>
Disposable links can be defined anywhere in the story file.
Using <code>undum.game.init()</code> is recommended.
</p>

<p>
A link's status can be checked with
<code>vorple.undum.isDisposed()</code><a href="../API/symbols/vorple.undum.html#.isDisposed" class="api">API</a>
which will return <code>true</code> if the link has been disposed.
</p>


<h5>Disposing links manually</h5>

<p>
Links can be disposed manually by calling 
<code>vorple.undum.dispose()</code><a href="../API/symbols/vorple.undum.html#.dispose" class="api">API</a>.
The function can dispose any number of links at the same time, 
given either as separate arguments or as an array.
</p>

<pre class="brush: js;">
vorple.undum.dispose( 'name' );
vorple.undum.dispose( 'first', 'second', 'third' );
vorple.undum.dispose( [ 'first', 'second', 'third' ] );
</pre>

<p>
You can dispose even links that are not in the 
<code>vorple.undum.settings.disposableLinks</code> list.
</p>



<h5>Reactivating disposed links</h5>

<p>
To reactivate a link call 
<code>vorple.undum.reactivate()</code><a href="../API/symbols/vorple.undum.html#.reactivate" class="api">API</a>.
You can reactivate one or multiple links at the same time, just like with 
<code>vorple.undum.dispose()</code>.
</p>

<pre class="brush: js;">
vorple.undum.reactivate( 'name' );
vorple.undum.reactivate( 'first', 'second', 'third' );
vorple.undum.reactivate( [ 'first', 'second', 'third' ] );
</pre>

<p>
Reactivation applies only to future links. Any inactive links currently visible
on the screen will not be activated. Reactivated links are not automatically 
removed from  the list of disposable links, 
so clicking on them later will again dispose of them.
</p>



<h4>Unique links</h4>

<p>
If a link has class <em>unique</em> applied to it, all other instances
of the same link will be automatically disabled. This can be used to make
sure that only one instance of a link will be visible at the same time.
</p>

<pre class="brush: html;">
Here's a &lt;a href="name" class="unique"&gt;link&lt;/a&gt; 
and &lt;a href="name"&gt;another&lt;/a&gt;
but only the former one will be active because it's marked as unique
and the latter links to the same place.
</pre>

<p>
Or, using Vorple's HTML helpers:
</p>

<pre class="brush: js;">
vorple.html.link( 'name', 'link', { classes: 'unique' } );
// &rarr; &lt;a href="name" class="unique"&gt;link&lt;/a&gt;
</pre>

<div class="resources">Resources</div>
<ul>
<li>The Outgribe: <a href="http://vorple-if.com/outgribe/2011/more-undum-link-types/">More Undum link types</a></li>
</ul>


<h2 id="examples">Complete examples</h2>

<p>
The examples can be downloaded separately from the
<a href="http://vorple-if.com/download">download page</a>.
</p>


<h3 id="everything">One With Everything</h3>

<p>
The example story <em>One With Everything</em> uses all standard Vorple
features. It's not really a story or a game by itself, 
but if you want to see a real-life code example of any of the features
you can probably find it in the story's source code.  
</p>

<ul>
<li><em><a href="../../stories/everything/">One With Everything</a></em></li>
</ul>


<h3 id="rabbithole">Down the Rabbit-Hole</h3>

<p>
<em>Down the Rabbit-Hole</em> showcases Vorple's features. It doesn't
include every feature like <em>One With Everything</em> does and it uses
some more advanced techniques to e.g. show custom popup windows.
</p>

<ul>
<li><em><a href="../../stories/rabbithole/">Down the Rabbit-Hole</a></em></li>
</ul>



<footer id="footer">
    <a rel="license" href="http://creativecommons.org/licenses/by/3.0/" id="footerCC">
        <img alt="Creative Commons License"  src="http://i.creativecommons.org/l/by/3.0/80x15.png" />
    </a>
    <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">
        <em>Enhancing Undum Hypertext Fiction with Vorple</em>
    </span> is licensed under a 
    <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 Unported License</a>.
    The Vorple project and the web site <a href="http://vorple-if.com">vorple-if.com</a> 
    must be credited as the original author.
</footer>

</article>

</body>
</html>
